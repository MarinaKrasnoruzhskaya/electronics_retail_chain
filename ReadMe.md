# Cеть по продаже электроники

Создано веб-приложение с API-интерфейсом и админ-панелью. Сеть по продаже электроники представляет собой
иерархическую структуру из трех уровней:
- завод;
- розничная сеть;
- индивидуальный предприниматель.
  Каждое звено сети ссылается только на одного поставщика оборудования (не обязательно предыдущего по иерархии). Уровень
  иерархии определяется не названием звена, а отношением к остальным элементам сети, т. е. завод всегда находится на
  уровне 0, а если розничная сеть относится напрямую к заводу, минуя остальные звенья, ее уровень — 1.

## Инструкции по развертыванию проекта с Docker

1. Убедиться, что установлен Docker, Docker-compose
2. Клонировать репозиторий
   ```sh
   git clone git@github.com:MarinaKrasnoruzhskaya/electronics_retail_chain.git
   ```
3. Заполнить файл ```.env.sample``` и переименовать его в файл с именем ```.env```
4. Собрать образ
   ```sh
   docker-compose build
   ```
5. Запустить контейнеры
   ```sh
   docker-compose up
   ```

## Инструкции по развертыванию проекта без Docker

1. Клонировать репозиторий
   ```sh
   git clone git@github.com:MarinaKrasnoruzhskaya/electronics_retail_chain.git
   ```
2. Перейти в директорию
   ```sh
   cd electronics_retail_chain
   ```
3. Установить виртуальное окружение
   ```sh
   python -m venv env
   ```
4. Активировать виртуальное окружение
   ```sh
   source env/bin/activate
   ```
5. Установить зависимости
   ```sh
   pip install -r requirements.txt
   ```
6. Заполнить файл ```.env.sample``` и переименовать его в файл с именем ```.env```
7. Создать БД ```uds```
   ```
   psql -U postgres
   create database electronics_retail_chain;  
   \q
   ```
8. Применить миграции
    ```sh
   python manage.py migrate
    ```
9. Создать суперпользователя
    ```sh
   python manage.py csu
   ```

## Документация проекта:

1. http://127.0.0.1:8000/swagger-ui/
2. http://127.0.0.1:8000/redoc/


## Возможные действия в Django Admin:

- перейти по ссылке на «Поставщика»;
- выполнить фильтрацию по названию города;
- использовать admin action "Очистить задолженность перед поставщиком" для выбранных объектов.

## Эндпоинты проекта:

- GET /chain/ - вывод списка звеньев сети
- POST /chain/ - создание звена сети с контактами
- GET /chain/{id}/ - вывод звена сети с контактами по заданному id
- PUT /chain/{id}/ - изменение звена сети и его контактов
- PATCH /chain/{id}/ - частичное изменение звена сети и его контактов
- DELETE /chain/{id}/ - удаление звена сети
- DELETE /chain/{element_chain_id}/contact/{id}/delete/ - удаление контакта по заданному id для звена сети по заданному
  element_chain_id
- GET /chain/products/ - вывод списка продуктов всех звеньев сети
- POST /chain/products/create/ - создание продукта заводом
- GET /chain/products/{id}/ - вывод звена цепи с продуктами по заданному pk
- PATCH /chain/products/{id}/update/ - частичное изменения продукта заводом или добавления продукта в список продуктов
  другими звеньями цепи (не завод)
- DELETE /chain/{element_chain_id}/products/{id}/delete/ - удаление продукта заводом

## Лицензия:

Этот проект лицензирован по [лицензии MIT](LICENSE)
